# BrightHills Claude Code Plugin Marketplace

Internal Claude Code plugin marketplace for BrightHills.

## Plugins

### bh — General-purpose tools

| Component | Type | Invocation | Description |
|-----------|------|------------|-------------|
| [session](plugins/bh/commands/session.md) | command | `/bh:session` | Create session summaries to preserve development context before `/compact`, or organize existing session files into a year/month/day hierarchy with `--organize`. |
| [hook-logger](plugins/bh/hooks/) | hook | _(auto-active)_ | Logs all Claude Code hook events (PreToolUse, PostToolUse, Stop, SessionStart, SessionEnd, etc.) to `.claude/hook_logs/{event}.jsonl` for debugging and analytics. |

### bh-agile — Agile toolkit

| Component | Type | Invocation | Description |
|-----------|------|------------|-------------|
| [story-writer](plugins/bh-agile/skills/story-writer/) | skill | `/bh-agile:story-writer` | Write professional Agile Epics, Stories, and Tasks following vertical slice principles with Given-When-Then acceptance criteria. |
| [implement](plugins/bh-agile/skills/implement/) | skill | `/bh-agile:implement` | Implement a feature from a ticket (`#45`) or local documentation (`@docs/features/auth/`) with structured phases, quality gates, and optional ticket administration. |
| [plan-feature](plugins/bh-agile/skills/plan-feature/) | skill | `/bh-agile:plan-feature` | Plan a new feature through service design discovery and expert agent consultation. Generates feature documentation in `docs/features/`. |
| [create-tickets](plugins/bh-agile/skills/create-tickets/) | skill | `/bh-agile:create-tickets` | Create Epic, Stories, and Tasks in the issue tracker from feature documentation or structured input. |
| [code-review](plugins/bh-agile/skills/code-review/) | skill | `/bh-agile:code-review` | Review code for DRY, SOLID, and Clean Code violations. Also used during implement Phase 3.5. |
| [setup](plugins/bh-agile/commands/setup.md) | command | `/bh-agile:setup` | Project setup wizard: explores codebase, generates clean-code rules from skeletons, copies static rules, creates issue tracking labels (GitHub/GitLab), and generates a platform-specific ticket manager agent. |
| [agile-ticket-manager](plugins/bh-agile/assets/agents/agile-ticket-manager.template.md) | agent template | _(generated by setup)_ | Manages Epic/Story/Task hierarchy with status propagation. Generated into `.claude/agents/` with platform-specific commands (gh/glab). |
| [qa-tester](plugins/bh-agile/agents/qa-tester.md) | agent | _(auto-discovered)_ | Plans, creates, and executes E2E tests based on Story Acceptance Criteria. Analyzes AC to create test plans, writes test code, runs tests, and reports results. |
| [security-auditor](plugins/bh-agile/agents/security-auditor.md) | agent | _(auto-discovered)_ | Performs comprehensive security audits focusing on OWASP Top 10 vulnerabilities, data leakage, authentication flows, and sensitive data exposure. |

**Workflow integration:**

```
/plan-feature "auth system"  →  docs/features/auth/
/create-tickets @docs/features/auth/  →  Epic #1, Stories #2-#5
/implement #2  OR  /implement @docs/features/auth/  →  Implementation
```

**Additional resources in plugin:**

| Resource | Path | Purpose |
|----------|------|---------|
| Rule skeletons | `assets/rules/skeletons/` | Instructions for generating project-specific rules (e.g., clean-code) |
| Static rules | `assets/rules/` | Pre-built rules copied with path customization (e.g., feature-docs) |
| Agent template | `assets/agents/` | Agent template with placeholder-based assembly |
| Agent fragments | `assets/agents/fragments/{github,gitlab}/` | Platform-specific command snippets for template assembly |

### bh-statusline — Custom status line

| Component | Type | Invocation | Description |
|-----------|------|------------|-------------|
| [setup](plugins/bh-statusline/commands/setup.md) | command | `/bh-statusline:setup` | Install the BrightHills custom status line script (`~/.claude/statusline-command.sh`) and configure Claude Code to use it. Checks for existing configuration and asks before overwriting. |

**Displays:** `Model | Git branch | Context left [████░░░░░░] 72% | Directory | Output style`

- Context progress bar color changes: green (>40%), yellow (>20%), red (<=20%)
- Uses Claude Code's pre-calculated `remaining_percentage` for accuracy
- Requires `jq`

### Naming convention

All BrightHills skills use the `bh` prefix. Scoped skills use `bh-<scope>`:
- General: `/bh:skill-name`
- Agile: `/bh-agile:skill-name`

## Installation

### 1. Add the marketplace

```bash
/plugin marketplace add https://github.com/brighthills/brighthills-cc-plugins.git
```

### 2. Install plugins

```bash
/plugin install bh@brighthills-cc-plugins-public
/plugin install bh-agile@brighthills-cc-plugins-public
/plugin install bh-statusline@brighthills-cc-plugins-public
```

### 3. Run setup commands

After installing, run the setup commands in each project where you want to use the plugins. Restart Claude Code first (`/exit` then reopen) so the new plugins load.

| Command | What it does |
|---------|--------------|
| `/bh-agile:setup` | Explores project structure, generates project-specific clean-code rules, copies static rules (e.g. feature-docs), creates issue tracking labels (GitHub/GitLab), generates a platform-specific ticket manager agent, scaffolds `docs/features/`, and offers recommended external plugin installation (code-simplifier, context7, playwright, agent-browser). |
| `/bh-statusline:setup` | Copies the status line script to `~/.claude/statusline-command.sh` and configures `~/.claude/settings.json`. Asks before overwriting existing configuration. Only needs to run once (not per-project). |

### 4. Recommended external plugins

The following external plugins are recommended for the full BrightHills Agile workflow. The `/bh-agile:setup` command can install these interactively, but you can also install them manually.

All three are available in the built-in `claude-plugins-official` marketplace (no extra marketplace registration needed):

```bash
/plugin install code-simplifier@claude-plugins-official
/plugin install context7@claude-plugins-official
/plugin install playwright@claude-plugins-official
```

The `agent-browser` plugin requires registering the Vercel marketplace first, and its CLI must be installed separately:

```bash
# 1. Install the CLI
npm install -g agent-browser && agent-browser install

# 2. Register the marketplace
/plugin marketplace add https://github.com/vercel-labs/agent-browser.git

# 3. Install the plugin
/plugin install agent-browser@agent-browser
```

| Plugin | Purpose | Used by |
|--------|---------|---------|
| [code-simplifier](https://github.com/anthropics/claude-plugins-official/tree/main/plugins/code-simplifier) | Simplifies and refactors complex code | `/bh-agile:implement` (review phase) |
| [context7](https://github.com/anthropics/claude-plugins-official/tree/main/external_plugins/context7) | Up-to-date library documentation lookup via MCP | `/bh-agile:implement` (coding phase) |
| [playwright](https://github.com/anthropics/claude-plugins-official/tree/main/external_plugins/playwright) | Browser automation via Playwright MCP | `qa-tester` agent (E2E tests) |
| [agent-browser](https://github.com/vercel-labs/agent-browser) | Headless browser automation CLI for AI agents | Web testing, form filling, screenshots |

### Installation scopes

| Scope   | Flag              | Settings file                 | Use case                      |
| ------- | ----------------- | ----------------------------- | ----------------------------- |
| user    | _(default)_       | `~/.claude/settings.json`     | Personal, across all projects |
| project | `--scope project` | `.claude/settings.json`       | Team-shared, checked into VCS |
| local   | `--scope local`   | `.claude/settings.local.json` | Project-specific, gitignored  |

### Update & manage

```bash
/plugin marketplace update brighthills-cc-plugins    # Refresh marketplace
/plugin                                              # Interactive plugin manager
```

## Structure

- `.claude-plugin/marketplace.json` — Plugin registry
- `plugins/` — Each plugin in its own subdirectory with `.claude-plugin/plugin.json`

### Plugin layout

```
plugins/my-plugin/
├── .claude-plugin/
│   └── plugin.json       # Plugin manifest (REQUIRED)
├── skills/               # Agent Skills (SKILL.md per skill)
├── commands/             # Slash commands (.md per command)
├── agents/               # Subagent definitions
├── hooks/                # Event hooks (hooks.json)
├── .mcp.json             # MCP server config
└── .lsp.json             # LSP server config
```

## Contributing

Add plugins to the `plugins/` directory and register them in `.claude-plugin/marketplace.json`.
